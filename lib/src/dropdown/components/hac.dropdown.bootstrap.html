<div class="hac-dropdown dropdown" [ngClass]="{ 'open show': !collapsed }" >
    <input
        type="text" class="form-control js-filter"
        [placeholder]="placeholder" id="{{id}}"
        [(ngModel)]="filter" [readonly]="!filtrable || disabled"
        (keyup)="handleKey($event)"
        (focus)="openDropdown($event)"
        (focusOut)="closeDropdown($event)"
        autocomplete="off" />

    <ul class="dropdown-menu"
        role="menu"
        *ngIf="hasGroups()"
        [hacCopyWidth]="getFilterElem()"
        widthCssProperty="width"
        [skip]="collapsed"
        [style.maxHeight]="calcDropdownHeight()">

        <li class="dropdown-item"><a *ngIf="allowEmpty" (click)="select(null)">{{placeholder}}</a></li>
        <ng-container *ngFor="let group of optionGroups">
            <ng-container *ngIf="group.label">
                <li class="dropdown-item"><a><strong>{{group.label}}</strong></a></li>
                <div class="dropdown-divider divider"></div>
            </ng-container>
            <li *ngFor="let option of group.options | hacDropdownFilter: filter : shouldApplyFilter()"
                (click)="select(option.key)"
                class="dropdown-item" [ngClass]="{ 'active': option.key === selected }">
                <a>{{option.label}}</a>
            </li>
        </ng-container>
    </ul>
</div>