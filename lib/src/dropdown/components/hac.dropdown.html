<div class="hac-dd-label">
    <input 
        type="text" class="hac-dd-filter" [placeholder]="placeholder"
        [(ngModel)]="filter"
        [readonly]="!filtrable"
        (keyup)="handleEnter($event)"
        (click)="openDropdown($event)"
        (focus)="openDropdown($event)"
        (focusOut)="closeDropdown($event)"
     />

    <i class="hac-dd-caret hac-dd-caret--down" aria-hidden="true"></i>
</div>

<div class="hac-dd-list" 
    [ngClass]="{ 'hac-dd-list--is-collapsed': collapsed }" 
    *ngIf="!hasGroups() && options"
    [style.width]="calcDropdownWidth()"
    [style.maxHeight]="calcDropdownHeight()">
    
    <div class="hac-dd-option" *ngIf="allowEmpty" (click)="select(null)">{{placeholder}}</div>
    <div *ngFor="let option of options | hacDropdownFilter: filter : shouldApplyFilter()" 
        (click)="select(option.key)" class="hac-dd-option hac-dd-choice" 
        [ngClass]="{ 
            'hac-dd-option--is-selected': option.key === selected }">
        {{option.label}}
    </div>
</div>


<div class="hac-dd-list" 
    [ngClass]="{ 'hac-dd-list--is-collapsed': collapsed }" 
    *ngIf="hasGroups()"
    [style.width]="calcDropdownWidth()"
    [style.maxHeight]="calcDropdownHeight()">

    <div class="hac-dd-option" *ngIf="allowEmpty" (click)="select(null)">{{placeholder}}</div>
    <div class="hac-dd-group" *ngFor="let group of groups">
        <div class="hac-dd-grouplabel">{{group.label}}</div>
        <div *ngFor="let option of group.options | hacDropdownFilter: filter : shouldApplyFilter()" 
            (click)="select(option.key)" class="hac-dd-option hac-dd-choice" 
            [ngClass]="{ 
                'hac-dd-option--is-selected': option.key === selected }">
            {{option.label}}
        </div>
    </div>
    
</div>